% ----- Consignes exo 1 ----- %
\begin{td-exo}[Glouglouglou]\,\\ % 1 
	Dérouler à la main l'algorithme de ford-Fulkerson sur les deux réseaux de transport suivants afin de déterminer dans chaque cas un flot maximal ainsi qu'une coupe minimale (les valeurs notées sur les arcs sont les capacités correspondantes).
    Pour le second graphe, on commencera par une augmentation de flot le long du chemin \(sabdp\) suivi d'une augmentation de flot le long de \(scedbap\).

    % TODO Insert 2 graphs here
\end{td-exo}

% ----- Solutions exo 1 ----- %
\iftoggle{showsolutions}{
	\begin{td-sol}[]\,\\ %
		A remplir %TODO solve exercise 1
	\end{td-sol}
}{}


% ----- Consignes exo 2 ----- %
\begin{td-exo}[PL]\,\\ % 2 
	Soit \(\mathcal{N} = (D, s, p, c)\) un réseau de transport. Montrer qu'il est possible d'écrire un programme linéaire correspondant à la racherche d'un flot de valeur maximal dans \(\mathcal N\).
    On proposera un modèle utilisant un nombre polynomial (en la taille de \(D\)) de variables et de contraintes.
\end{td-exo}

% ----- Solutions exo 2 ----- %
\iftoggle{showsolutions}{
	\begin{td-sol}[]\,\\ %
		A remplir %TODO solve exercise 2
	\end{td-sol}
}{}


% ----- Consignes exo 3 ----- %
\begin{td-exo}[Décomposition d'un flot]\,\\ % 3 
	Soit \(f\) un flot à valeurs entières sur un réseau de transport \(\mathcal{N} = (D, s, p, c)\).
    On veut montrer qu'il existe dans \(D\) un multi-ensemble (un ensemble où les éléments peuvent apparaitre plusieurs fois) de chemins \(P_1,\ldots,P_k\) tous de \(s\) à \(p\) et un multi-ensemble de cycles \(C_1,\ldots,C_l\) tels que pour tout arc \(xy\) de \(D\) on ait \(f(xy) = \#\{i\in \{1,\ldots,k\}: xy\in P_i\} + \#\{j\in \{1,\ldots,l\}: xy\in C_j\}\).
    \begin{enumerate}
        \item Sur le premier graphe de l'exercice 1, % TODO add reference here
        on considère le flot \(f\) défini par \(f(ab) = 5, f(bc) = 2, f(bp) = 4, f(ca) = 2, f(cd) = 1, f(db) = 1, f(sa) = 3, f(sc) = 1\).
        Donner la décomposition voulue.

        \item Prouver le résultat attendu en raisonnant par récurrence sur \(\sum_{xy\in A(D)} f(xy)\).
    \end{enumerate}
\end{td-exo}

% ----- Solutions exo 3 ----- %
\iftoggle{showsolutions}{
	\begin{td-sol}[]\, %
		\begin{enumerate}
			\item La décomposition est:
			\begin{itemize}
				\item On prend une fois le chemin \(scdp\).
				\item On prend 3 fois le chemin \(sabp\).
				\item On prend 2 fois le cycle \(abc\).
			\end{itemize}

			\item Si la somme vaut 0 alors on ne prend aucun chemin ou cycle.

			Sinon, on a 
			\begin{equation*}
				\sum_{xy\in A(D)} f(xy) = S > 0
			\end{equation*}
			et on suppose que la propriété est vraie pour toute somme de flot \( < S\).

			On note \(D_f\) le graphe orienté formé des arcs partant du flot 
			\begin{equation*}
				D_f = \left(
					V, \{xy \in A(D) : f(xy) > 0\}.
				\right)
			\end{equation*}
			Deux cas se présentent:
			\begin{itemize}
				\item Premier cas: \(|f| > 0 : \exists a \in N^+(s)\) avec \(f(sa) > 0\). 

				Notons \(X = \big\{\)sommets de \(D_f\) tels qu'il existe un chemin de \(D_f\) de \(s\) à \(x\big\}\).

				Par la propriété du cours, si \(p \notin X\), on a
				\begin{equation*}
					f(X, \ol X) = |f| + f(\ol X, X) \ge |f| > 0
				\end{equation*}
				et donc il existe \(uv \in A(D)\) tel que \(u \in X, v \in \ol X\) et \(f(uv) > 0\)
				mais alors \(v\) doit appartenir à \(X\), contradiction.

				Il existe donc un chemin \(P\) de \(s\) à \(p\) dans \(D_f\), c'est-à-dire:
				\begin{equation*}
					\forall xy \in P, f(xy) \geq 1 \quad ( > 0)
				\end{equation*}

				On définit le flot \(f'\) par 
				\begin{equation*}
					\begin{cases}
						f'(uv) = f(uv) & \text{si } uv \notin P\\
						f'(uv) = f(uv) - 1 & \text{si } uv \in P
					\end{cases}
				\end{equation*}
				et on garde la conservation du flot.

				On a 
				\begin{equation*}
					\begin{aligned}
						\sum_{xy\in A(D)} f'(xy)
						&= \sum_{xy\in A(D)} f(xy) - \mathsf{long}(P)\\
						& < \sum_{xy\in A(D)} f(xy)
					\end{aligned}
				\end{equation*}
				Par récurrence, il existe \(P_1, \ldots, P_k\) chemins dirigés de \(s\) à \(p\) et \(C_1, \ldots, C_l\) cycles dirigés tels que 
				\begin{equation*}
					\begin{aligned}
						\forall xy \in A(D), f'(xy) 
						&= \#\{i\in \{1,\ldots,k\}: xy\in P_i\} \\
						&+ \#\{j\in \{1,\ldots,l\}: xy\in C_j\}
					\end{aligned}
				\end{equation*}
				On pose alors \(P_{k+1} = P\) et on a la décomposition suivante:
				\begin{equation*}
					\begin{aligned}
						\forall xy \in A(D), xy \notin P \quad f(xy) = f'(xy) 
						&= \#\{i\in \{1,\ldots,k+1\}: xy\in P_i\} \\
						&+ \#\{j\in \{1,\ldots,l\}: xy\in C_j\}
					\end{aligned}
				\end{equation*}
				et 
				\begin{equation*}
					\begin{aligned}
						\forall xy \in A(D), xy \in P \quad f(xy) = f'(xy) + 1 
						&= \#\{i\in \{1,\ldots,k\}: xy\in P_i\} \\
						&+ \#\{j\in \{1,\ldots,l\}: xy\in C_j\} + 1
					\end{aligned}
				\end{equation*}

				\item Second cas: \(|f| = 0\). Comme on a \(\sum_{xy\in A(D)} f(xy) > 0\), il existe un arc \(uv \in A(D)\) tel que 
				\begin{equation*}
					f(uv) \geq 1
				\end{equation*}
				On note \(X = \big\{z\)sommets de \(D_f\) tels qu'il existe un chemin dirigé de \(z\) à \(u\) dans \(D_f\big\}\). Montrons que \(v\in X\).

				On a \(s \notin X\) car \(|f| = 0\) donc aucun arc de \(D_f\) ne sort de \(s\). Alors 
				% insert schema here 
				et \(f(X, \ol X) = f(\ol X, X)\) donc si \(v \notin X\), on a
				\begin{equation*}
					f(X, \ol X) > 0 \implies f(\ol X, X) > 0
				\end{equation*}
				et il existerait \(a\notin X, b \in X\) tel que \(f(ab) > 0\) donc \(a \in X\), contradiction.

				Donc \(v\in X\) et il existe un cycle dirigé \(C\) dans \(D_f\) contenant l'arc \(uv\).

				Comme précédemment, on définit le flot \(f'\) par
				\begin{equation*}
					\begin{cases}
						f'(xy) = f(xy) & \text{si } xy \notin C\\
						f'(xy) = f(xy) - 1 & \text{si } xy \in C
					\end{cases}
				\end{equation*}
				et on garde la conservation du flot. On applique la récurrence au flot \(f'\) et on conclut de la même manière en ajoutant le cycle \(C\) à la décomposition.
			\end{itemize}
		\end{enumerate}
	\end{td-sol}
}{}


% ----- Consignes exo 4 ----- %
\begin{td-exo}[Théorème de Hall]\,\\ % 4 
	Soit \(G = ((A, B), E)\) un graphe biparti (de bipartition \((A, B)\)). On souhaite montrer. % TODO FINIR
\end{td-exo}

% ----- Solutions exo 4 ----- %
\iftoggle{showsolutions}{
	\begin{td-sol}[]\,\\ %
		A remplir %TODO solve exercise 4
	\end{td-sol}
}{}


% ----- Consignes exo 5 ----- %
\begin{td-exo}[Convexité]\,\\ % 5 
	% fill
\end{td-exo}

% ----- Solutions exo 5 ----- %
\iftoggle{showsolutions}{
	\begin{td-sol}[]\,\\ %
		A remplir %TODO solve exercise 5
	\end{td-sol}
}{}


% ----- Consignes exo 6 ----- %
\begin{td-exo}[Convexité]\,\\ % 6 
	% fill
\end{td-exo}

% ----- Solutions exo 6 ----- %
\iftoggle{showsolutions}{
	\begin{td-sol}[]\,\\ %
		A remplir %TODO solve exercise 6
	\end{td-sol}
}{}


% ----- Consignes exo 7 ----- %
\begin{td-exo}[Convexité]\,\\ % 7 
	% fill
\end{td-exo}

% ----- Solutions exo 7 ----- %
\iftoggle{showsolutions}{
	\begin{td-sol}[]\,\\ %
		A remplir %TODO solve exercise 7
	\end{td-sol}
}{}