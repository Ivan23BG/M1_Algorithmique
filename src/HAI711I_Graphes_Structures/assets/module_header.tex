\makeatletter

% ==============================================================================
% TABLE OF CONTENTS FORMATTING
% ==============================================================================

% Adjusts indentation and spacing for different section levels in the TOC.

% ============================================================================== 
% GENERAL MATH SHORTCUTS
% ==============================================================================

\newcommand{\abs}[1]{\left\lvert#1\right\rvert}  % Absolute value with scalable bars
\newcommand{\Tau}{\mathcal{T}}                   % Calligraphic Tau, often used for topology

% ============================================================================== 
% SUBJECT-SPECIFIC THEOREM ENVIRONMENTS
% ==============================================================================

% --- Numbered theorem environments (per subsection) ---
% Uses colored left border and custom counter for clarity in notes.
\theoremstyle{default}
\mytheorem{definition}{Définition}{algebraic-amber}{subsection}{o}  % Definitions: amber, numbered per subsection
\mytheorem{exs}{Exemples}{matrix-mist}{subsection}{o}               % Examples: mist, numbered per subsection

% --- Unnumbered theorem environments ---
% Used for remarks, interpretations, and other statements that don't require numbering.
\theoremstyle{nonum}
\mytheorem{interp}{Interprétation}{verdant}{}{}    % Interpretation: green, unnumbered
\mytheorem{proposition}{Proposition}{verdant}{}{}  % Proposition: green, unnumbered
\mytheorem{notation}{Notation}{verdant}{}{}        % Notation: green, unnumbered
\mytheorem{example}{Exemple}{matrix-mist}{}{}      % Example: mist, unnumbered
\mytheorem{exo}{Exercice}{matrix-mist}{}{}         % Exercise: mist, unnumbered
\mytheorem{exercice}{Exercice}{matrix-mist}{}{}    % Exercise (alt): mist, unnumbered
\mytheorem{theorem}{Théorème}{astral}{}{}          % Theorem: blue, unnumbered
\mytheorem{lemma}{Lemme}{astral}{}{}               % Lemma: blue, unnumbered
\mytheorem{remark}{Remarque}{verdant}{}{}          % Remark: green, unnumbered

\makeatother

\counterwithout{tdcounter}{section} 

\usetikzlibrary{shapes,arrows,positioning,calc,fit,backgrounds,angles,quotes,intersections}

\usepackage{floatrow}
\usepackage{caption}

% % failed attempt to have dynamic exercise/solution referencing
% \NewDocumentCommand{\tdsection}{sm}{%
%     \IfBooleanTF{#1}
%         {\section*{#2}}
%         {\section{#2}}%
%     \label{sec:td\thesection}%
%     \iftoggle{showquestions}{%
%         \addcontentsline{toc}{section}{\nameref{sec:td\thesection}}%
%     }{%
%         % When questions are hidden, point to solutions
%         \addcontentsline{toc}{section}{\nameref{sec:td\thesection-sol}}%
%     }%
% }

% \NewDocumentCommand{\tdexercise}{o m}{%
%     \iftoggle{showquestions}{%
%         \begin{td-exo}[#1]#2\end{td-exo}%
%         \label{exo:td\thesection}%
%     }{}%
% }

% \NewDocumentCommand{\tdsolution}{o m}{%
%     \begin{td-sol}[#1]#2\end{td-sol}%
%     \label{exo:td\thesection-sol}%
% }